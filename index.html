<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crispy Chicken Sales Dashboard - Enhanced</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        :root {
            --primary: #dc3545;
            --secondary: #6c757d;
            --success: #198754;
            --info: #0dcaf0;
            --warning: #ffc107;
            --danger: #dc3545;
            --dark: #1d3557;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .navbar {
            background: linear-gradient(135deg, var(--dark) 0%, #2d4663 100%) !important;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: #fff !important;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .navbar-brand i {
            color: var(--primary);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .sidebar {
            background: linear-gradient(180deg, var(--dark) 0%, #2d4663 100%);
            min-height: calc(100vh - 56px);
            padding: 20px 0;
            box-shadow: 4px 0 6px rgba(0,0,0,0.1);
        }
        
        .sidebar .nav-link {
            color: rgba(255,255,255,0.8);
            border-radius: 10px;
            margin: 5px 15px;
            padding: 12px 20px;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .sidebar .nav-link:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(-5px);
            color: #fff;
        }
        
        .sidebar .nav-link.active {
            background: var(--primary);
            color: #fff;
            box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .metric-card {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border-right: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(220, 53, 69, 0.05) 100%);
            pointer-events: none;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            animation: countUp 1s ease-out;
        }
        
        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .metric-icon {
            font-size: 3rem;
            opacity: 0.2;
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .chart-container {
            position: relative;
            height: 350px;
            padding: 20px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, #bd2130 100%);
            border: none;
            border-radius: 10px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
        }
        
        .table {
            border-radius: 10px;
            overflow: hidden;
        }
        
        .table thead {
            background: linear-gradient(135deg, var(--dark) 0%, #2d4663 100%);
            color: #fff;
        }
        
        .table tbody tr {
            transition: all 0.3s;
        }
        
        .table tbody tr:hover {
            background: rgba(220, 53, 69, 0.05);
            transform: scale(1.01);
        }
        
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            z-index: 9999;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .notification.success { background: linear-gradient(135deg, #198754 0%, #157347 100%); }
        .notification.error { background: linear-gradient(135deg, #dc3545 0%, #bd2130 100%); }
        .notification.info { background: linear-gradient(135deg, #0dcaf0 0%, #0aa2c0 100%); }
        
        .data-entry-form {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .form-control, .form-select {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 12px;
            transition: all 0.3s;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.15);
            transform: translateY(-2px);
        }
        
        .stats-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin: 5px;
        }
        
        .badge-up {
            background: linear-gradient(135deg, #198754 0%, #157347 100%);
            color: #fff;
        }
        
        .badge-down {
            background: linear-gradient(135deg, #dc3545 0%, #bd2130 100%);
            color: #fff;
        }
        
        .loading-spinner {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
            border-width: 0.3rem;
        }
        
        .page {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .nav-tabs .nav-link {
            border-radius: 10px 10px 0 0;
            color: var(--dark);
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .nav-tabs .nav-link:hover {
            background: rgba(220, 53, 69, 0.1);
        }
        
        .nav-tabs .nav-link.active {
            background: var(--primary);
            color: #fff;
        }
        
        .delete-btn {
            background: linear-gradient(135deg, #dc3545 0%, #bd2130 100%);
            border: none;
            border-radius: 8px;
            padding: 5px 15px;
            color: #fff;
            transition: all 0.3s;
        }
        
        .delete-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(220, 53, 69, 0.4);
        }

        .edit-btn {
            background: linear-gradient(135deg, #0dcaf0 0%, #0aa2c0 100%);
            border: none;
            border-radius: 8px;
            padding: 5px 15px;
            color: #fff;
            transition: all 0.3s;
            margin-right: 5px;
        }
        
        .edit-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(13, 202, 240, 0.4);
        }
        
        @media print {
            .sidebar, .navbar, .btn, .notification {
                display: none !important;
            }
            .main-content {
                margin: 0 !important;
            }
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring circle {
            transition: stroke-dashoffset 1s ease;
        }
        
        .comparison-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
        }

        .filter-section {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .date-range-picker {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .growth-indicator {
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .growth-up {
            color: #198754;
        }

        .growth-down {
            color: #dc3545;
        }

        .channel-badge {
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .channel-delivery {
            background: #e7f5ff;
            color: #0c63e4;
        }

        .channel-dinein {
            background: #fff3cd;
            color: #997404;
        }

        .channel-takeaway {
            background: #d1e7dd;
            color: #0a3622;
        }

        .mini-chart {
            height: 80px;
            margin-top: 10px;
        }

        .goal-progress {
            margin-top: 10px;
        }

        .goal-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .goal-fill {
            height: 100%;
            background: linear-gradient(90deg, #198754 0%, #20c997 100%);
            transition: width 1s ease;
            border-radius: 10px;
        }

        .forecast-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: #fff;
            padding: 20px;
            border-radius: 15px;
        }

        .bulk-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-box {
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner-border text-primary"></div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle me-2"></i>
        <span id="notificationText"></span>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-drumstick-bite"></i>
                Crispy Chicken Sales Dashboard
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <span class="nav-link text-white">
                            <i class="fas fa-calendar me-1"></i>
                            <span id="currentDate"></span>
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-lg-2 px-0 sidebar">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-page="dashboard">
                            <i class="fas fa-chart-line me-2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="data-entry">
                            <i class="fas fa-edit me-2"></i> Data Entry
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="analytics">
                            <i class="fas fa-chart-pie me-2"></i> Analytics
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="comparison">
                            <i class="fas fa-balance-scale me-2"></i> Comparisons
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="forecast">
                            <i class="fas fa-chart-area me-2"></i> Forecast
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="report">
                            <i class="fas fa-file-alt me-2"></i> Report
                        </a>
                    </li>
                    <li class="nav-item mt-4">
                        <a class="nav-link" href="#" id="exportDataBtn">
                            <i class="fas fa-file-export me-2"></i> Export CSV
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="importDataBtn">
                            <i class="fas fa-file-import me-2"></i> Import CSV
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="resetDataBtn">
                            <i class="fas fa-redo me-2"></i> Reset Data
                        </a>
                    </li>
                </ul>
            </div>

            <div class="col-md-9 col-lg-10 px-4 main-content">
                <!-- Dashboard Page -->
                <div id="dashboardPage" class="page">
                    <div class="d-flex justify-content-between align-items-center pt-4 pb-3 mb-4">
                        <h2 class="fw-bold">
                            <i class="fas fa-chart-line text-primary me-2"></i>
                            Sales Performance Dashboard
                        </h2>
                        <button class="btn btn-primary" id="refreshDashboardBtn">
                            <i class="fas fa-sync-alt me-2"></i> Refresh
                        </button>
                    </div>

                    <!-- Filters -->
                    <div class="filter-section">
                        <div class="row align-items-end">
                            <div class="col-md-3">
                                <label class="form-label fw-bold">Date Range</label>
                                <div class="date-range-picker">
                                    <input type="date" class="form-control" id="filterStartDate">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label fw-bold">&nbsp;</label>
                                <input type="date" class="form-control" id="filterEndDate">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label fw-bold">Branch</label>
                                <select class="form-select" id="filterBranch">
                                    <option value="">All Branches</option>
                                    <option value="Crispy Chicken-Hamdan St">Hamdan St</option>
                                    <option value="Crispy Chicken Khaldia">Khaldia</option>
                                    <option value="Crispy Chicken Shabiya 11">Shabiya 11</option>
                                    <option value="Crispy Chicken Muroor">Muroor</option>
                                    <option value="Crispy Chicken Al Barsha">Al Barsha</option>
                                    <option value="Crispy Chicken Al Satwa">Al Satwa</option>
                                    <option value="Crispy Chicken Al Rgga">Al Rgga</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label fw-bold">Channel</label>
                                <select class="form-select" id="filterChannel">
                                    <option value="">All Channels</option>
                                    <option value="Delivery">Delivery</option>
                                    <option value="Dine-in">Dine-in</option>
                                    <option value="Takeaway">Takeaway</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col">
                                <button class="btn btn-primary" id="applyFiltersBtn">
                                    <i class="fas fa-filter me-2"></i> Apply Filters
                                </button>
                                <button class="btn btn-secondary" id="clearFiltersBtn">
                                    <i class="fas fa-times me-2"></i> Clear
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Key Metrics -->
                    <div class="row mb-4">
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card metric-card">
                                <div class="card-body position-relative">
                                    <i class="fas fa-money-bill-wave metric-icon text-success"></i>
                                    <div class="metric-label text-muted mb-2">Total Sales</div>
                                    <div class="metric-value text-success" id="totalSales">AED 0</div>
                                    <div class="growth-indicator growth-up" id="salesGrowth">
                                        <i class="fas fa-arrow-up"></i> 0%
                                    </div>
                                    <div class="goal-progress">
                                        <small class="text-muted">Goal: <span id="salesGoal">AED 50,000</span></small>
                                        <div class="goal-bar">
                                            <div class="goal-fill" id="salesGoalFill" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card metric-card">
                                <div class="card-body position-relative">
                                    <i class="fas fa-shopping-cart metric-icon text-info"></i>
                                    <div class="metric-label text-muted mb-2">Total Transactions</div>
                                    <div class="metric-value text-info" id="totalTransactions">0</div>
                                    <div class="growth-indicator growth-up" id="transactionsGrowth">
                                        <i class="fas fa-arrow-up"></i> 0%
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card metric-card">
                                <div class="card-body position-relative">
                                    <i class="fas fa-chart-bar metric-icon text-warning"></i>
                                    <div class="metric-label text-muted mb-2">Avg Transaction</div>
                                    <div class="metric-value text-warning" id="avgTransaction">AED 0</div>
                                    <div class="growth-indicator growth-down" id="avgGrowth">
                                        <i class="fas fa-arrow-down"></i> 0%
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-md-6 mb-3">
                            <div class="card metric-card">
                                <div class="card-body position-relative">
                                    <i class="fas fa-store metric-icon text-danger"></i>
                                    <div class="metric-label text-muted mb-2">Active Branches</div>
                                    <div class="metric-value text-danger" id="activeBranches">0</div>
                                    <small class="text-muted">Total: 7 branches</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div class="row mb-4">
                        <div class="col-lg-8">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title fw-bold mb-4">
                                        <i class="fas fa-chart-line text-primary me-2"></i>
                                        Daily Sales Trend
                                    </h5>
                                    <div class="chart-container">
                                        <canvas id="dailyChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title fw-bold mb-4">
                                        <i class="fas fa-chart-pie text-primary me-2"></i>
                                        Channel Distribution
                                    </h5>
                                    <div class="chart-container" style="height: 280px;">
                                        <canvas id="channelChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Branch Performance -->
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title fw-bold mb-4">
                                <i class="fas fa-store text-primary me-2"></i>
                                Branch Performance Leaderboard
                            </h5>
                            <div class="chart-container">
                                <canvas id="branchChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Entry Page -->
                <div id="dataEntryPage" class="page" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center pt-4 pb-3 mb-4">
                        <h2 class="fw-bold">
                            <i class="fas fa-edit text-primary me-2"></i>
                            Sales Data Entry
                        </h2>
                    </div>

                    <div class="data-entry-form">
                        <form id="dataEntryForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label fw-bold">Date</label>
                                    <input type="date" class="form-control" id="entryDate" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label fw-bold">Branch</label>
                                    <select class="form-select" id="entryBranch" required>
                                        <option value="">Select Branch</option>
                                        <option value="Crispy Chicken-Hamdan St">Crispy Chicken - Hamdan St</option>
                                        <option value="Crispy Chicken Khaldia">Crispy Chicken Khaldia</option>
                                        <option value="Crispy Chicken Shabiya 11">Crispy Chicken Shabiya 11</option>
                                        <option value="Crispy Chicken Muroor">Crispy Chicken Muroor</option>
                                        <option value="Crispy Chicken Al Barsha">Crispy Chicken Al Barsha</option>
                                        <option value="Crispy Chicken Al Satwa">Crispy Chicken Al Satwa</option>
                                        <option value="Crispy Chicken Al Rgga">Crispy Chicken Al Rgga</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label class="form-label fw-bold">Channel</label>
                                    <select class="form-select" id="entryChannel" required>
                                        <option value="Delivery">Delivery</option>
                                        <option value="Dine-in">Dine-in</option>
                                        <option value="Takeaway">Takeaway</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label fw-bold">Transactions</label>
                                    <input type="number" class="form-control" id="entryTransactions" min="0" required>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label fw-bold">Sales (AED)</label>
                                    <input type="number" class="form-control" id="entrySales" min="0" step="0.01" required>
                                </div>
                            </div>
                            <input type="hidden" id="editIndex" value="">
                            <button type="submit" class="btn btn-primary btn-lg w-100">
                                <i class="fas fa-plus-circle me-2"></i> <span id="submitBtnText">Add Data</span>
                            </button>
                        </form>
                    </div>

                    <div class="card mt-4">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="card-title fw-bold mb-0">
                                    <i class="fas fa-database text-primary me-2"></i>
                                    Current Data
                                </h5>
                                <div class="search-box">
                                    <input type="text" class="form-control" id="searchData" placeholder="Search...">
                                </div>
                            </div>
                            <div class="bulk-actions">
                                <button class="btn btn-sm btn-danger" id="deleteSelectedBtn" style="display: none;">
                                    <i class="fas fa-trash me-1"></i> Delete Selected
                                </button>
                                <button class="btn btn-sm btn-secondary" id="selectAllBtn">
                                    <i class="fas fa-check-square me-1"></i> Select All
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover" id="currentDataTable">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" id="selectAllCheckbox"></th>
                                            <th>Date</th>
                                            <th>Branch</th>
                                            <th>Channel</th>
                                            <th>Transactions</th
