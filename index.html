<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crispy Chicken Sales Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #dc3545;
            --secondary-color: #6c757d;
            --success-color: #198754;
            --info-color: #0dcaf0;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --crispy-red: #e63946;
            --crispy-orange: #f1faee;
            --crispy-blue: #a8dadc;
            --crispy-green: #457b9d;
            --crispy-dark: #1d3557;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--crispy-red) !important;
        }
        
        .sidebar {
            min-height: calc(100vh - 56px);
            background-color: var(--crispy-dark);
            color: white;
            padding-top: 20px;
        }
        
        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            border-radius: 5px;
            margin-bottom: 5px;
            transition: all 0.3s;
        }
        
        .sidebar .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .sidebar .nav-link.active {
            background-color: var(--crispy-red);
            color: white;
        }
        
        .main-content {
            padding: 20px;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            margin-bottom: 20px;
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid rgba(0, 0, 0, 0.125);
            font-weight: 600;
        }
        
        .metric-card {
            border-left: 4px solid var(--crispy-red);
        }
        
        .metric-value {
            font-size: 1.75rem;
            font-weight: 700;
        }
        
        .metric-label {
            font-size: 0.875rem;
            color: var(--secondary-color);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        .branch-chart-container {
            height: 400px;
        }
        
        .daily-chart-container {
            height: 400px;
        }
        
        .target-chart-container {
            height: 400px;
        }
        
        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .btn-primary {
            background-color: var(--crispy-red);
            border-color: var(--crispy-red);
        }
        
        .btn-primary:hover {
            background-color: #c82333;
            border-color: #bd2130;
        }
        
        .form-control:focus {
            border-color: var(--crispy-red);
            box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
        }
        
        .data-entry-form {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
        
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .notification.success {
            background-color: var(--success-color);
        }
        
        .notification.error {
            background-color: var(--danger-color);
        }
        
        .notification.info {
            background-color: var(--info-color);
        }
        
        .management-report {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
        
        .report-header {
            border-bottom: 2px solid var(--crispy-red);
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        
        .report-section {
            margin-bottom: 30px;
        }
        
        .report-section h3 {
            color: var(--crispy-red);
            margin-bottom: 15px;
        }
        
        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .report-table th, .report-table td {
            border: 1px solid #dee2e6;
            padding: 8px 12px;
            text-align: left;
        }
        
        .report-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        .report-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .recommendation-list {
            padding-left: 20px;
        }
        
        .recommendation-list li {
            margin-bottom: 8px;
        }
        
        .save-options {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .save-options h5 {
            margin-bottom: 15px;
            color: var(--crispy-dark);
        }
        
        .data-status {
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-weight: 500;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .data-status.saved {
            background-color: #d1e7dd;
            color: #0f5132;
            border-left: 4px solid var(--success-color);
        }
        
        .data-status.unsaved {
            background-color: #f8d7da;
            color: #842029;
            border-left: 4px solid var(--danger-color);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }
        
        .data-status i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .data-management-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .data-form-section {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
        
        .data-table-section {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
        
        .table-row-hover:hover {
            background-color: rgba(220, 53, 69, 0.1);
            cursor: pointer;
        }
        
        .action-buttons {
            display: flex;
            gap: 5px;
        }
        
        .action-buttons .btn {
            font-size: 0.875rem;
            padding: 0.25rem 0.5rem;
        }
        
        .clear-all-btn {
            position: relative;
            overflow: hidden;
        }
        
        .clear-all-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .clear-all-btn:active::after {
            animation: ripple 0.6s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        .confirmation-dialog {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .confirmation-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.15);
        }
        
        .confirmation-content h4 {
            margin-bottom: 20px;
            color: var(--crispy-red);
        }
        
        .confirmation-details {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: left;
        }
        
        .confirmation-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .data-management-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .data-management-actions .btn {
            flex: 1;
            min-width: 150px;
        }
        
        .save-indicator {
            display: inline-block;
            margin-left: 10px;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .save-indicator.saved {
            background-color: var(--success-color);
            color: white;
        }
        
        .save-indicator.saving {
            background-color: var(--warning-color);
            color: var(--dark-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .file-upload-area {
            border: 2px dashed var(--secondary-color);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .file-upload-area:hover {
            border-color: var(--crispy-red);
            background-color: rgba(220, 53, 69, 0.05);
        }
        
        .file-upload-area.dragover {
            border-color: var(--crispy-red);
            background-color: rgba(220, 53, 69, 0.1);
        }
        
        .file-upload-area i {
            font-size: 2rem;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }
        
        .file-upload-area p {
            margin: 0;
            color: var(--secondary-color);
        }
        
        .file-upload-area p strong {
            color: var(--crispy-dark);
        }
        
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 56px;
                bottom: 0;
                left: 0;
                z-index: 100;
                width: 250px;
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .metric-card {
                margin-bottom: 15px;
            }
            
            .data-management-container {
                padding: 0 10px;
            }
            
            .data-management-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-drumstick-bite me-2"></i> Crispy Chicken Sales Dashboard
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" id="dashboardLink">
                            <i class="fas fa-chart-line me-1"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="dataManagementLink">
                            <i class="fas fa-edit me-1"></i> Data Management
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="reportLink">
                            <i class="fas fa-file-alt me-1"></i> Management Report
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block sidebar collapse" id="sidebar">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" data-page="dashboard" id="sidebarDashboardLink">
                                <i class="fas fa-chart-line me-2"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="data-management" id="sidebarDataManagementLink">
                                <i class="fas fa-edit me-2"></i> Data Management
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="report" id="sidebarReportLink">
                                <i class="fas fa-file-alt me-2"></i> Management Report
                            </a>
                        </li>
                        <li class="nav-item mt-4">
                            <a class="nav-link" href="#" id="saveDataBtn">
                                <i class="fas fa-save me-2"></i> Save Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="loadDataBtn">
                                <i class="fas fa-upload me-2"></i> Load Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="exportDataBtn">
                                <i class="fas fa-file-export me-2"></i> Export Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="resetDataBtn">
                                <i class="fas fa-redo me-2"></i> Reset Data
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
                <!-- Dashboard Page -->
                <div id="dashboardPage" class="page">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Sales Performance Dashboard</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="refreshDashboardBtn">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Key Metrics -->
                    <div class="row mb-4">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card metric-card">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Total Sales</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800 metric-value" id="totalSales">AED 0.00</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-money-bill-wave fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card metric-card">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Transactions</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800 metric-value" id="totalTransactions">0</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-shopping-cart fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card metric-card">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Avg. Transaction</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800 metric-value" id="avgTransaction">AED 0.00</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-chart-bar fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card metric-card">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Target</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800 metric-value" id="overallTarget">AED 0.00</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-bullseye fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="branch-tab" data-bs-toggle="tab" data-bs-target="#branch" type="button" role="tab">Branch Performance</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="daily-tab" data-bs-toggle="tab" data-bs-target="#daily" type="button" role="tab">Daily Trends</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="target-tab" data-bs-toggle="tab" data-bs-target="#target" type="button" role="tab">Target Plan</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="dashboardTabsContent">
                        <!-- Branch Performance Tab -->
                        <div class="tab-pane fade show active" id="branch" role="tabpanel">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-store me-2"></i> Branch Delivery Performance
                                </div>
                                <div class="card-body">
                                    <div class="branch-chart-container">
                                        <canvas id="branchChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-header">
                                    <i class="fas fa-table me-2"></i> Branch Performance Details
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table table-striped table-hover" id="branchTable">
                                            <thead>
                                                <tr>
                                                    <th>Branch</th>
                                                    <th>Total Transactions</th>
                                                    <th>Total Sales (AED)</th>
                                                    <th>Avg. Transaction Value</th>
                                                    <th>Avg. Daily Sales</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Data will be inserted here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Daily Trends Tab -->
                        <div class="tab-pane fade" id="daily" role="tabpanel">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-line me-2"></i> Daily Delivery Trends
                                </div>
                                <div class="card-body">
                                    <div class="daily-chart-container">
                                        <canvas id="dailyChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-header">
                                    <i class="fas fa-table me-2"></i> Daily Performance Details
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table table-striped table-hover" id="dailyTable">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Day of Week</th>
                                                    <th>Total Transactions</th>
                                                    <th>Total Sales (AED)</th>
                                                    <th>Avg. Transaction Value</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Data will be inserted here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Target Plan Tab -->
                        <div class="tab-pane fade" id="target" role="tabpanel">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-bullseye me-2"></i> Variable Target Distribution Plan
                                </div>
                                <div class="card-body">
                                    <div class="target-chart-container">
                                        <canvas id="targetChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-header">
                                    <i class="fas fa-table me-2"></i> Target Distribution Details
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table table-striped table-hover" id="targetTable">
                                            <thead>
                                                <tr>
                                                    <th>Branch</th>
                                                    <th>Current Sales (AED)</th>
                                                    <th>Growth Rate</th>
                                                    <th>Performance Score</th>
                                                    <th>Target Sales (AED)</th>
                                                    <th>Target Increase (AED)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Data will be inserted here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Management Page -->
                <div id="dataManagementPage" class="page" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Data Management</h1>
                    </div>

                    <div class="data-management-container">
                        <!-- Data Status -->
                        <div class="data-status saved" id="dataStatus">
                            <i class="fas fa-check-circle me-2"></i> All changes are saved
                            <span class="save-indicator saved" id="saveIndicator">SAVED</span>
                        </div>

                        <!-- Data Management Actions -->
                        <div class="data-management-actions">
                            <button class="btn btn-primary" id="saveDataBtn2">
                                <i class="fas fa-save me-2"></i> Save Data
                            </button>
                            <button class="btn btn-info" id="loadDataBtn2">
                                <i class="fas fa-upload me-2"></i> Load Data
                            </button>
                            <button class="btn btn-success" id="exportDataBtn2">
                                <i class="fas fa-file-export me-2"></i> Export to CSV
                            </button>
                            <button class="btn btn-danger" id="resetDataBtn2">
                                <i class="fas fa-redo me-2"></i> Reset All Data
                            </button>
                        </div>

                        <!-- Add New Entry Section -->
                        <div class="data-form-section">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4>
                                    <span id="formTitle">Add New Sales Data</span>
                                </h4>
                                <button class="btn btn-primary" id="addNewEntryBtn">
                                    <i class="fas fa-plus-circle me-2"></i> Add New Entry
                                </button>
                            </div>
                            
                            <form id="dataEntryForm">
                                <input type="hidden" id="editIndex" value="-1">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="entryDate" class="form-label">Date</label>
                                        <input type="date" class="form-control" id="entryDate" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="entryBranch" class="form-label">Branch</label>
                                        <select class="form-select" id="entryBranch" required>
                                            <option value="">Select Branch</option>
                                            <option value="Crispy Chicken-Hamdan St">Crispy Chicken-Hamdan St</option>
                                            <option value="Crispy Chicken Khaldia">Crispy Chicken Khaldia</option>
                                            <option value="Crispy Chicken Shabiya 11">Crispy Chicken Shabiya 11</option>
                                            <option value="Crispy Chicken Muroor">Crispy Chicken Muroor</option>
                                            <option value="Crispy Chicken Al Barsha">Crispy Chicken Al Barsha</option>
                                            <option value="Crispy Chicken Al Satwa">Crispy Chicken Al Satwa</option>
                                            <option value="Crispy Chicken Al Rgga">Crispy Chicken Al Rgga</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="entryChannel" class="form-label">Channel</label>
                                        <select class="form-select" id="entryChannel" required>
                                            <option value="Delivery">Delivery</option>
                                            <option value="Dine-in">Dine-in</option>
                                            <option value="Takeaway">Takeaway</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="entryTransactions" class="form-label">Transactions</label>
                                        <input type="number" class="form-control" id="entryTransactions" min="0" required>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="entrySales" class="form-label">Sales (AED)</label>
                                        <input type="number" class="form-control" id="entrySales" min="0" step="0.01" required>
                                    </div>
                                    <div class="col-md-6 mb-3 d-flex align-items-end">
                                        <button type="submit" class="btn btn-primary w-100">
                                            <i class="fas fa-save me-2"></i> <span id="submitButtonText">Add Entry</span>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Data Table Section -->
                        <div class="data-table-section">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4><i class="fas fa-table me-2"></i> Sales Data Table</h4>
                                <button class="btn btn-danger clear-all-btn" id="clearAllDataBtn">
                                    <i class="fas fa-trash-alt me-2"></i> Clear All Data
                                </button>
                            </div>
                            
                            <div class="table-container">
                                <table class="table table-striped table-hover" id="currentDataTable">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Branch</th>
                                            <th>Channel</th>
                                            <th>Transactions</th>
                                            <th>Sales (AED)</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be inserted here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Management Report Page -->
                <div id="reportPage" class="page" style="display: none;">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Management Report</h1>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="generateReportBtn">
                                    <i class="fas fa-sync-alt"></i> Generate Report
                                </button>
                            </div>
                            <div class="btn-group">
                                <button type="button" class="btn btn-sm btn-primary" id="downloadReportBtn">
                                    <i class="fas fa-download"></i> Download
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="management-report">
                        <div class="report-header">
                            <h2 class="text-center">CRISPY CHICKEN DELIVERY PERFORMANCE REPORT</h2>
                            <p class="text-center text-muted">Report Date: <span id="reportDate"></span></p>
                            <p class="text-center text-muted">Data Period: <span id="reportPeriod"></span></p>
                        </div>

                        <!-- Executive Summary -->
                        <div class="report-section">
                            <h3>Executive Summary</h3>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Total Current Sales:</strong> AED <span id="execTotalSales">0.00</span></p>
                                    <p><strong>Overall Target:</strong> AED <span id="execTarget">0.00</span> (10% increase)</p>
                                    <p><strong>Total Transactions:</strong> <span id="execTransactions">0</span></p>
                                    <p><strong>Avg. Transaction Value:</strong> AED <span id="execAvgValue">0.00</span></p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Peak Day:</strong> <span id="execPeakDay"></span></p>
                                    <p><strong>Peak Day Sales:</strong> AED <span id="execPeakSales">0.00</span></p>
                                    <p><strong>Top Branch:</strong> <span id="execTopBranch"></span></p>
                                    <p><strong>Top Branch Sales:</strong> AED <span id="execTopBranchSales">0.00</span></p>
                                </div>
                            </div>
                        </div>

                        <!-- Branch Performance Analysis -->
                        <div class="report-section">
                            <h3>Branch Delivery Performance Analysis</h3>
                            <div class="chart-container mb-4">
                                <canvas id="reportBranchChart"></canvas>
                            </div>
                            
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th>Branch</th>
                                        <th>Total Transactions</th>
                                        <th>Total Sales (AED)</th>
                                        <th>Avg. Transaction Value</th>
                                        <th>Avg. Daily Sales</th>
                                    </tr>
                                </thead>
                                <tbody id="reportBranchTableBody">
                                    <!-- Data will be inserted here -->
                                </tbody>
                            </table>
                            
                            <div class="mt-3">
                                <p><strong>Key Findings:</strong></p>
                                <ul>
                                    <li>Top performing branch: <span id="reportTopBranch"></span></li>
                                    <li>Highest transaction value: <span id="reportHighValueBranch"></span></li>
                                    <li>Lowest performing branches: <span id="reportLowBranches"></span></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Daily Trend Analysis -->
                        <div class="report-section">
                            <h3>Daily Delivery Trend Analysis</h3>
                            <div class="chart-container mb-4">
                                <canvas id="reportDailyChart"></canvas>
                            </div>
                            
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Day of Week</th>
                                        <th>Total Transactions</th>
                                        <th>Total Sales (AED)</th>
                                        <th>Avg. Transaction Value</th>
                                    </tr>
                                </thead>
                                <tbody id="reportDailyTableBody">
                                    <!-- Data will be inserted here -->
                                </tbody>
                            </table>
                            
                            <div class="mt-3">
                                <p><strong>Performance Trends:</strong></p>
                                <ul>
                                    <li>Peak day: <span id="reportPeakDay"></span> (<span id="reportPeakDayOfWeek"></span>) - AED <span id="reportPeakDaySales"></span></li>
                                    <li>Lowest day: <span id="reportLowDay"></span> (<span id="reportLowDayOfWeek"></span>) - AED <span id="reportLowDaySales"></span></li>
                                    <li>Weekend effect: Weekend sales (Fri-Sat) average AED <span id="reportWeekendAvg"></span> vs weekday AED <span id="reportWeekdayAvg"></span></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Target Plan -->
                        <div class="report-section">
                            <h3>Variable Target Distribution Plan</h3>
                            <div class="chart-container mb-4">
                                <canvas id="reportTargetChart"></canvas>
                            </div>
                            
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th>Branch</th>
                                        <th>Current Sales (AED)</th>
                                        <th>Growth Rate</th>
                                        <th>Performance Score</th>
                                        <th>Target Sales (AED)</th>
                                        <th>Target Increase (AED)</th>
                                    </tr>
                                </thead>
                                <tbody id="reportTargetTableBody">
                                    <!-- Data will be inserted here -->
                                </tbody>
                            </table>
                            
                            <div class="mt-3">
                                <p><strong>Overall Target:</strong> AED <span id="reportOverallTarget"></span> (10% increase from current AED <span id="reportCurrentTotal"></span>)</p>
                                
                                <p><strong>Target Distribution Strategy:</strong></p>
                                <ul>
                                    <li><strong>High Performers</strong> (Hamdan St, Khaldia): Focus on maintaining quality during peak periods</li>
                                    <li><strong>Mid Performers</strong> (Shabiya 11, Muroor, Al Barsha): Implement promotional offers during low-traffic days</li>
                                    <li><strong>Low Performers</strong> (Al Satwa, Al Rgga): Conduct market analysis and targeted marketing campaigns</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Management Recommendations -->
                        <div class="report-section">
                            <h3>Management Recommendations</h3>
                            <ol class="recommendation-list">
                                <li>
                                    <strong>Operational Improvements:</strong>
                                    <ul>
                                        <li>Implement demand forecasting for peak days (especially weekends)</li>
                                        <li>Optimize staff scheduling based on historical delivery patterns</li>
                                        <li>Standardize order processing across all branches</li>
                                    </ul>
                                </li>
                                <li>
                                    <strong>Performance Monitoring:</strong>
                                    <ul>
                                        <li>Track daily performance against targets with weekly reviews</li>
                                        <li>Implement real-time dashboard for delivery metrics</li>
                                        <li>Conduct monthly performance reviews with branch managers</li>
                                    </ul>
                                </li>
                                <li>
                                    <strong>Growth Initiatives:</strong>
                                    <ul>
                                        <li>Launch loyalty program for repeat delivery customers</li>
                                        <li>Introduce time-based promotions during low-traffic periods</li>
                                        <li>Explore partnerships with food delivery platforms for wider reach</li>
                                    </ul>
                                </li>
                                <li>
                                    <strong>Resource Allocation:</strong>
                                    <ul>
                                        <li>Allocate additional delivery staff to high-performing branches during peak hours</li>
                                        <li>Invest in training programs for underperforming branches</li>
                                        <li>Consider menu adjustments based on local preferences at low-performing branches</li>
                                    </ul>
                                </li>
                                <li>
                                    <strong>Performance Incentives:</strong>
                                    <ul>
                                        <li>Implement bonus structure for branches exceeding targets</li>
                                        <li>Recognize top-performing branches in company communications</li>
                                        <li>Create healthy competition between branches with monthly performance awards</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div class="confirmation-dialog" id="confirmationDialog" style="display: none;">
        <div class="confirmation-content">
            <h4 id="confirmationTitle">Confirm Action</h4>
            <p id="confirmationMessage">Are you sure you want to proceed?</p>
            <div class="confirmation-details" id="confirmationDetails"></div>
            <div class="confirmation-buttons">
                <button class="btn btn-secondary" id="cancelConfirmation">Cancel</button>
                <button class="btn btn-primary" id="confirmAction">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Hidden file input for loading data -->
    <input type="file" id="fileInput" style="display: none;" accept=".json,.csv">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        // Initialize data
        let salesData = [
            {Date: '10/01/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 73, Sales: 3216},
            {Date: '10/01/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 38, Sales: 1859.8},
            {Date: '10/01/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 39, Sales: 1965},
            {Date: '10/01/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 42, Sales: 2024},
            {Date: '10/01/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 24, Sales: 1376},
            {Date: '10/01/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 11, Sales: 387},
            {Date: '10/01/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 5, Sales: 204},
            {Date: '10/02/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 62, Sales: 3238},
            {Date: '10/02/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 28, Sales: 1492},
            {Date: '10/02/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 44, Sales: 2057},
            {Date: '10/02/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 40, Sales: 1945},
            {Date: '10/02/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 30, Sales: 1644},
            {Date: '10/02/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 10, Sales: 527},
            {Date: '10/02/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 4, Sales: 146},
            {Date: '10/03/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 72, Sales: 3100},
            {Date: '10/03/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 46, Sales: 2930},
            {Date: '10/03/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 40, Sales: 1828},
            {Date: '10/03/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 32, Sales: 1617},
            {Date: '10/03/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 29, Sales: 1127},
            {Date: '10/03/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 11, Sales: 427},
            {Date: '10/03/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 10, Sales: 475},
            {Date: '10/04/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 84, Sales: 4833},
            {Date: '10/04/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 43, Sales: 2400},
            {Date: '10/04/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 31, Sales: 1447},
            {Date: '10/04/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 36, Sales: 2299},
            {Date: '10/04/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 20, Sales: 936},
            {Date: '10/04/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 11, Sales: 566},
            {Date: '10/04/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 15, Sales: 554},
            {Date: '10/05/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 76, Sales: 2921},
            {Date: '10/05/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 43, Sales: 1982},
            {Date: '10/05/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 29, Sales: 1344},
            {Date: '10/05/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 20, Sales: 1126},
            {Date: '10/05/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 25, Sales: 1089},
            {Date: '10/05/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 13, Sales: 462},
            {Date: '10/05/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 8, Sales: 241},
            {Date: '10/06/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 101, Sales: 4363},
            {Date: '10/06/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 54, Sales: 2113},
            {Date: '10/06/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 61, Sales: 2714.8},
            {Date: '10/06/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 47, Sales: 2124},
            {Date: '10/06/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 57, Sales: 4201},
            {Date: '10/06/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 20, Sales: 848},
            {Date: '10/06/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 18, Sales: 708},
            {Date: '10/07/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 119, Sales: 5056},
            {Date: '10/07/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 50, Sales: 2175},
            {Date: '10/07/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 80, Sales: 3475},
            {Date: '10/07/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 46, Sales: 1957},
            {Date: '10/07/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 44, Sales: 2590},
            {Date: '10/07/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 18, Sales: 705},
            {Date: '10/07/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 19, Sales: 823},
            {Date: '10/08/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 58, Sales: 2568},
            {Date: '10/08/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 24, Sales: 1037},
            {Date: '10/08/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 30, Sales: 1574},
            {Date: '10/08/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 81, Sales: 1404},
            {Date: '10/08/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 29, Sales: 1891},
            {Date: '10/08/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 5, Sales: 148},
            {Date: '10/08/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 10, Sales: 519},
            {Date: '10/09/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 53, Sales: 2738},
            {Date: '10/09/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 31, Sales: 2112},
            {Date: '10/09/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 35, Sales: 1487},
            {Date: '10/09/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 35, Sales: 1978},
            {Date: '10/09/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 17, Sales: 733},
            {Date: '10/09/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 5, Sales: 184},
            {Date: '10/09/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 13, Sales: 408},
            {Date: '10/10/2025', Branch: 'Crispy Chicken-Hamdan St', Channel: 'Delivery', Transactions: 65, Sales: 2900},
            {Date: '10/10/2025', Branch: 'Crispy Chicken Khaldia', Channel: 'Delivery', Transactions: 46, Sales: 2943},
            {Date: '10/10/2025', Branch: 'Crispy Chicken Shabiya 11', Channel: 'Delivery', Transactions: 45, Sales: 2411},
            {Date: '10/10/2025', Branch: 'Crispy Chicken Muroor', Channel: 'Delivery', Transactions: 39, Sales: 2261},
            {Date: '10/10/2025', Branch: 'Crispy Chicken Al Barsha', Channel: 'Delivery', Transactions: 25, Sales: 1523},
            {Date: '10/10/2025', Branch: 'Crispy Chicken Al Satwa', Channel: 'Delivery', Transactions: 12, Sales: 976},
            {Date: '10/10/2025', Branch: 'Crispy Chicken Al Rgga', Channel: 'Delivery', Transactions: 10, Sales: 573}
        ];

        // Load data from localStorage if available
        function loadDataFromStorage() {
            try {
                const savedData = localStorage.getItem('crispyChickenSalesData');
                if (savedData) {
                    salesData = JSON.parse(savedData);
                    updateDataStatus(true);
                }
            } catch (e) {
                console.error("Error loading data from storage:", e);
            }
        }

        // Save data to localStorage
        function saveDataToStorage() {
            try {
                // Show saving indicator
                updateSaveIndicator('saving');
                
                // Simulate saving delay for better UX
                setTimeout(() => {
                    localStorage.setItem('crispyChickenSalesData', JSON.stringify(salesData));
                    updateDataStatus(true);
                    updateSaveIndicator('saved');
                    showNotification('Data saved successfully!', 'success');
                }, 500);
            } catch (e) {
                console.error("Error saving data to storage:", e);
                updateSaveIndicator('saved');
                showNotification('Error saving data!', 'error');
            }
        }

        // Update save indicator
        function updateSaveIndicator(status) {
            const indicator = document.getElementById('saveIndicator');
            if (indicator) {
                indicator.className = `save-indicator ${status}`;
                
                if (status === 'saving') {
                    indicator.textContent = 'SAVING...';
                } else if (status === 'saved') {
                    indicator.textContent = 'SAVED';
                }
            }
        }

        // Update data status indicator
        function updateDataStatus(saved) {
            const statusElement = document.getElementById('dataStatus');
            if (statusElement) {
                if (saved) {
                    statusElement.className = 'data-status saved';
                    statusElement.innerHTML = '<i class="fas fa-check-circle me-2"></i> All changes are saved';
                } else {
                    statusElement.className = 'data-status unsaved';
                    statusElement.innerHTML = '<i class="fas fa-exclamation-circle me-2"></i> You have unsaved changes';
                }
            }
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            if (notification) {
                notification.textContent = message;
                notification.className = `notification ${type} show`;
                
                setTimeout(() => {
                    notification.className = `notification ${type}`;
                }, 3000);
            }
        }

        // Show confirmation dialog
        function showConfirmationDialog(title, message, details, onConfirm) {
            const dialog = document.getElementById('confirmationDialog');
            const titleElement = document.getElementById('confirmationTitle');
            const messageElement = document.getElementById('confirmationMessage');
            const detailsElement = document.getElementById('confirmationDetails');
            const confirmButton = document.getElementById('confirmAction');
            
            titleElement.textContent = title;
            messageElement.textContent = message;
            detailsElement.innerHTML = details;
            
            confirmButton.onclick = () => {
                onConfirm();
                hideConfirmationDialog();
            };
            
            dialog.style.display = 'flex';
        }

        // Hide confirmation dialog
        function hideConfirmationDialog() {
            const dialog = document.getElementById('confirmationDialog');
            dialog.style.display = 'none';
        }

        // Process sales data
        function processSalesData() {
            const branchSummary = {};
            const dailySummary = {};
            
            salesData.forEach(entry => {
                // Branch summary
                if (!branchSummary[entry.Branch]) {
                    branchSummary[entry.Branch] = {
                        Total_Transactions: 0,
                        Total_Sales: 0,
                        Unique_Days: new Set(),
                        Dates: []
                    };
                }
                
                branchSummary[entry.Branch].Total_Transactions += entry.Transactions;
                branchSummary[entry.Branch].Total_Sales += entry.Sales;
                branchSummary[entry.Branch].Unique_Days.add(entry.Date);
                branchSummary[entry.Branch].Dates.push(entry.Date);
                
                // Daily summary
                if (!dailySummary[entry.Date]) {
                    dailySummary[entry.Date] = {
                        Total_Transactions: 0,
                        Total_Sales: 0,
                        Day_of_Week: new Date(entry.Date).toLocaleDateString('en-US', { weekday: 'long' })
                    };
                }
                
                dailySummary[entry.Date].Total_Transactions += entry.Transactions;
                dailySummary[entry.Date].Total_Sales += entry.Sales;
            });
            
            // Calculate averages for branch summary
            Object.keys(branchSummary).forEach(branch => {
                const summary = branchSummary[branch];
                summary.Avg_Transaction_Value = summary.Total_Sales / summary.Total_Transactions;
                summary.Unique_Days = summary.Unique_Days.size;
                summary.Avg_Daily_Transactions = summary.Total_Transactions / summary.Unique_Days;
                summary.Avg_Daily_Sales = summary.Total_Sales / summary.Unique_Days;
            });
            
            // Calculate averages for daily summary
            Object.keys(dailySummary).forEach(date => {
                const summary = dailySummary[date];
                summary.Avg_Transaction_Value = summary.Total_Sales / summary.Total_Transactions;
            });
            
            return { branchSummary, dailySummary };
        }

        // Calculate target plan
        function calculateTargetPlan(branchSummary) {
            const targetData = {};
            let totalSales = 0;
            
            // Calculate total sales
            Object.keys(branchSummary).forEach(branch => {
                totalSales += branchSummary[branch].Total_Sales;
            });
            
            const overallTarget = totalSales * 1.10; // 10% increase
            
            // Calculate growth rates (simplified for this example)
            Object.keys(branchSummary).forEach(branch => {
                const summary = branchSummary[branch];
                
                // Simplified growth rate calculation
                const growthRate = Math.random() * 0.3 - 0.1; // Random between -10% and +20%
                
                // Performance score (combination of sales share and growth)
                const salesShare = summary.Total_Sales / totalSales;
                const performanceScore = (salesShare * 0.7) + (growthRate * 0.3);
                
                // Calculate target
                const weight = performanceScore / Object.keys(branchSummary).reduce((sum, b) => {
                    const s = branchSummary[b];
                    const sh = s.Total_Sales / totalSales;
                    const gr = Math.random() * 0.3 - 0.1;
                    const ps = (sh * 0.7) + (gr * 0.3);
                    return sum + ps;
                }, 0);
                
                const targetSales = overallTarget * weight;
                const targetIncrease = targetSales - summary.Total_Sales;
                
                targetData[branch] = {
                    Total_Sales: summary.Total_Sales,
                    Growth_Rate: growthRate,
                    Performance_Score: performanceScore,
                    Target_Sales: targetSales,
                    Target_Increase: targetIncrease
                };
            });
            
            return { targetData, overallTarget };
        }

        // Update dashboard metrics
        function updateDashboardMetrics() {
            try {
                const { branchSummary, dailySummary } = processSalesData();
                const { targetData, overallTarget } = calculateTargetPlan(branchSummary);
                
                // Calculate total metrics
                let totalSales = 0;
                let totalTransactions = 0;
                
                Object.keys(branchSummary).forEach(branch => {
                    totalSales += branchSummary[branch].Total_Sales;
                    totalTransactions += branchSummary[branch].Total_Transactions;
                });
                
                const avgTransaction = totalSales / totalTransactions;
                
                // Update DOM
                const totalSalesElement = document.getElementById('totalSales');
                if (totalSalesElement) totalSalesElement.textContent = `AED ${totalSales.toFixed(2)}`;
                
                const totalTransactionsElement = document.getElementById('totalTransactions');
                if (totalTransactionsElement) totalTransactionsElement.textContent = totalTransactions.toLocaleString();
                
                const avgTransactionElement = document.getElementById('avgTransaction');
                if (avgTransactionElement) avgTransactionElement.textContent = `AED ${avgTransaction.toFixed(2)}`;
                
                const overallTargetElement = document.getElementById('overallTarget');
                if (overallTargetElement) overallTargetElement.textContent = `AED ${overallTarget.toFixed(2)}`;
            } catch (e) {
                console.error("Error updating dashboard metrics:", e);
            }
        }

        // Update branch chart
        function updateBranchChart() {
            try {
                const { branchSummary } = processSalesData();
                
                const branches = Object.keys(branchSummary);
                const sales = branches.map(branch => branchSummary[branch].Total_Sales);
                
                const ctx = document.getElementById('branchChart');
                if (!ctx) return;
                
                const chartCtx = ctx.getContext('2d');
                if (!chartCtx) return;
                
                // Destroy existing chart if it exists
                if (window.branchChartInstance) {
                    window.branchChartInstance.destroy();
                }
                
                window.branchChartInstance = new Chart(chartCtx, {
                    type: 'bar',
                    data: {
                        labels: branches,
                        datasets: [{
                            label: 'Total Sales (AED)',
                            data: sales,
                            backgroundColor: [
                                'rgba(220, 53, 69, 0.7)',
                                'rgba(255, 193, 7, 0.7)',
                                'rgba(32, 201, 151, 0.7)',
                                'rgba(13, 202, 240, 0.7)',
                                'rgba(111, 66, 193, 0.7)',
                                'rgba(253, 126, 20, 0.7)',
                                'rgba(40, 167, 69, 0.7)'
                            ],
                            borderColor: [
                                'rgba(220, 53, 69, 1)',
                                'rgba(255, 193, 7, 1)',
                                'rgba(32, 201, 151, 1)',
                                'rgba(13, 202, 240, 1)',
                                'rgba(111, 66, 193, 1)',
                                'rgba(253, 126, 20, 1)',
                                'rgba(40, 167, 69, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Branch'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Total Sales by Branch'
                            },
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Error updating branch chart:", e);
            }
        }

        // Update daily chart
        function updateDailyChart() {
            try {
                const { dailySummary } = processSalesData();
                
                const dates = Object.keys(dailySummary).sort();
                const sales = dates.map(date => dailySummary[date].Total_Sales);
                const transactions = dates.map(date => dailySummary[date].Total_Transactions);
                
                const ctx = document.getElementById('dailyChart');
                if (!ctx) return;
                
                const chartCtx = ctx.getContext('2d');
                if (!chartCtx) return;
                
                // Destroy existing chart if it exists
                if (window.dailyChartInstance) {
                    window.dailyChartInstance.destroy();
                }
                
                window.dailyChartInstance = new Chart(chartCtx, {
                    type: 'line',
                    data: {
                        labels: dates,
                        datasets: [
                            {
                                label: 'Sales (AED)',
                                data: sales,
                                borderColor: 'rgba(220, 53, 69, 1)',
                                backgroundColor: 'rgba(220, 53, 69, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4,
                                yAxisID: 'y'
                            },
                            {
                                label: 'Transactions',
                                data: transactions,
                                borderColor: 'rgba(32, 201, 151, 1)',
                                backgroundColor: 'rgba(32, 201, 151, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4,
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                position: 'left',
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            },
                            y1: {
                                beginAtZero: true,
                                position: 'right',
                                title: {
                                    display: true,
                                    text: 'Transactions'
                                },
                                grid: {
                                    drawOnChartArea: false
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Date'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Daily Delivery Performance Trends'
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Error updating daily chart:", e);
            }
        }

        // Update target chart
        function updateTargetChart() {
            try {
                const { branchSummary } = processSalesData();
                const { targetData } = calculateTargetPlan(branchSummary);
                
                const branches = Object.keys(branchSummary);
                const currentSales = branches.map(branch => branchSummary[branch].Total_Sales);
                const targetSales = branches.map(branch => targetData[branch].Target_Sales);
                
                const ctx = document.getElementById('targetChart');
                if (!ctx) return;
                
                const chartCtx = ctx.getContext('2d');
                if (!chartCtx) return;
                
                // Destroy existing chart if it exists
                if (window.targetChartInstance) {
                    window.targetChartInstance.destroy();
                }
                
                window.targetChartInstance = new Chart(chartCtx, {
                    type: 'bar',
                    data: {
                        labels: branches,
                        datasets: [
                            {
                                label: 'Current Sales (AED)',
                                data: currentSales,
                                backgroundColor: 'rgba(111, 66, 193, 0.7)',
                                borderColor: 'rgba(111, 66, 193, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Target Sales (AED)',
                                data: targetSales,
                                backgroundColor: 'rgba(220, 53, 69, 0.7)',
                                borderColor: 'rgba(220, 53, 69, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Branch'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Branch Sales Targets'
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Error updating target chart:", e);
            }
        }

        // Update branch table
        function updateBranchTable() {
            try {
                const { branchSummary } = processSalesData();
                
                const tableBody = document.querySelector('#branchTable tbody');
                if (!tableBody) return;
                
                tableBody.innerHTML = '';
                
                Object.keys(branchSummary).forEach(branch => {
                    const summary = branchSummary[branch];
                    
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = branch;
                    row.insertCell(1).textContent = summary.Total_Transactions.toLocaleString();
                    row.insertCell(2).textContent = `AED ${summary.Total_Sales.toFixed(2)}`;
                    row.insertCell(3).textContent = `AED ${summary.Avg_Transaction_Value.toFixed(2)}`;
                    row.insertCell(4).textContent = `AED ${summary.Avg_Daily_Sales.toFixed(2)}`;
                });
            } catch (e) {
                console.error("Error updating branch table:", e);
            }
        }

        // Update daily table
        function updateDailyTable() {
            try {
                const { dailySummary } = processSalesData();
                
                const tableBody = document.querySelector('#dailyTable tbody');
                if (!tableBody) return;
                
                tableBody.innerHTML = '';
                
                Object.keys(dailySummary).sort().forEach(date => {
                    const summary = dailySummary[date];
                    
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = date;
                    row.insertCell(1).textContent = summary.Day_of_Week;
                    row.insertCell(2).textContent = summary.Total_Transactions.toLocaleString();
                    row.insertCell(3).textContent = `AED ${summary.Total_Sales.toFixed(2)}`;
                    row.insertCell(4).textContent = `AED ${summary.Avg_Transaction_Value.toFixed(2)}`;
                });
            } catch (e) {
                console.error("Error updating daily table:", e);
            }
        }

        // Update target table
        function updateTargetTable() {
            try {
                const { branchSummary } = processSalesData();
                const { targetData } = calculateTargetPlan(branchSummary);
                
                const tableBody = document.querySelector('#targetTable tbody');
                if (!tableBody) return;
                
                tableBody.innerHTML = '';
                
                Object.keys(branchSummary).forEach(branch => {
                    const summary = branchSummary[branch];
                    const target = targetData[branch];
                    
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = branch;
                    row.insertCell(1).textContent = `AED ${summary.Total_Sales.toFixed(2)}`;
                    row.insertCell(2).textContent = `${(target.Growth_Rate * 100).toFixed(2)}%`;
                    row.insertCell(3).textContent = target.Performance_Score.toFixed(2);
                    row.insertCell(4).textContent = `AED ${target.Target_Sales.toFixed(2)}`;
                    row.insertCell(5).textContent = `AED ${target.Target_Increase.toFixed(2)}`;
                });
            } catch (e) {
                console.error("Error updating target table:", e);
            }
        }

        // Update current data table
        function updateCurrentDataTable() {
            try {
                const tableBody = document.querySelector('#currentDataTable tbody');
                if (!tableBody) return;
                
                tableBody.innerHTML = '';
                
                salesData.forEach((entry, index) => {
                    const row = tableBody.insertRow();
                    row.className = 'table-row-hover';
                    
                    row.insertCell(0).textContent = entry.Date;
                    row.insertCell(1).textContent = entry.Branch;
                    row.insertCell(2).textContent = entry.Channel;
                    row.insertCell(3).textContent = entry.Transactions;
                    row.insertCell(4).textContent = `AED ${entry.Sales.toFixed(2)}`;
                    
                    const actionsCell = row.insertCell(5);
                    actionsCell.innerHTML = `
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-primary" onclick="editEntry(${index})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteEntry(${index})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    `;
                });
            } catch (e) {
                console.error("Error updating current data table:", e);
            }
        }

        // Edit entry
        function editEntry(index) {
            const entry = salesData[index];
            
            // Pre-fill the form
            document.getElementById('entryDate').value = entry.Date;
            document.getElementById('entryBranch').value = entry.Branch;
            document.getElementById('entryChannel').value = entry.Channel;
            document.getElementById('entryTransactions').value = entry.Transactions;
            document.getElementById('entrySales').value = entry.Sales;
            
            // Set edit index
            document.getElementById('editIndex').value = index;
            
            // Update form title and button
            document.getElementById('formTitle').textContent = 'Edit Sales Data';
            document.getElementById('submitButtonText').textContent = 'Update Entry';
            
            // Scroll to form
            document.getElementById('dataEntryForm').scrollIntoView({ behavior: 'smooth' });
        }

        // Delete entry
        function deleteEntry(index) {
            const entry = salesData[index];
            
            // Show confirmation dialog
            showConfirmationDialog(
                'Confirm Deletion',
                'Are you sure you want to delete this entry?',
                `<strong>Date:</strong> ${entry.Date}<br>
                 <strong>Branch:</strong> ${entry.Branch}<br>
                 <strong>Channel:</strong> ${entry.Channel}<br>
                 <strong>Transactions:</strong> ${entry.Transactions}<br>
                 <strong>Sales:</strong> AED ${entry.Sales.toFixed(2)}`,
                () => {
                    salesData.splice(index, 1);
                    updateCurrentDataTable();
                    updateDashboard();
                    updateDataStatus(false);
                    showNotification('Entry deleted successfully!', 'success');
                }
            );
        }

        // Clear all data
        function clearAllData() {
            // Double-click confirmation
            const clearBtn = document.getElementById('clearAllDataBtn');
            let clickCount = 0;
            
            clearBtn.addEventListener('click', function() {
                clickCount++;
                
                if (clickCount === 1) {
                    // First click: show message
                    showNotification('Double-click to confirm clearing all data!', 'info');
                    
                    // Reset click count after 3 seconds
                    setTimeout(() => {
                        clickCount = 0;
                    }, 3000);
                } else if (clickCount === 2) {
                    // Second click: clear data
                    showConfirmationDialog(
                        'Confirm Clear All Data',
                        'Are you sure you want to clear all data? This action cannot be undone.',
                        '',
                        () => {
                            salesData = [];
                            updateCurrentDataTable();
                            updateDashboard();
                            updateDataStatus(false);
                            showNotification('All data cleared!', 'success');
                        }
                    );
                    
                    // Reset click count
                    clickCount = 0;
                }
            });
        }

        // Update management report
        function updateManagementReport() {
            try {
                const { branchSummary, dailySummary } = processSalesData();
                const { targetData, overallTarget } = calculateTargetPlan(branchSummary);
                
                // Set report date
                const now = new Date();
                const reportDateElement = document.getElementById('reportDate');
                if (reportDateElement) reportDateElement.textContent = now.toLocaleDateString();
                
                // Set report period
                const dates = Object.keys(dailySummary).map(date => new Date(date));
                const minDate = new Date(Math.min(...dates));
                const maxDate = new Date(Math.max(...dates));
                const reportPeriodElement = document.getElementById('reportPeriod');
                if (reportPeriodElement) reportPeriodElement.textContent = 
                    `${minDate.toLocaleDateString()} to ${maxDate.toLocaleDateString()}`;
                
                // Calculate total metrics
                let totalSales = 0;
                let totalTransactions = 0;
                
                Object.keys(branchSummary).forEach(branch => {
                    totalSales += branchSummary[branch].Total_Sales;
                    totalTransactions += branchSummary[branch].Total_Transactions;
                });
                
                const avgTransaction = totalSales / totalTransactions;
                
                // Update executive summary
                const execTotalSalesElement = document.getElementById('execTotalSales');
                if (execTotalSalesElement) execTotalSalesElement.textContent = totalSales.toFixed(2);
                
                const execTargetElement = document.getElementById('execTarget');
                if (execTargetElement) execTargetElement.textContent = overallTarget.toFixed(2);
                
                const execTransactionsElement = document.getElementById('execTransactions');
                if (execTransactionsElement) execTransactionsElement.textContent = totalTransactions.toLocaleString();
                
                const execAvgValueElement = document.getElementById('execAvgValue');
                if (execAvgValueElement) execAvgValueElement.textContent = avgTransaction.toFixed(2);
                
                // Find peak day
                let peakDay = '';
                let peakSales = 0;
                
                Object.keys(dailySummary).forEach(date => {
                    if (dailySummary[date].Total_Sales > peakSales) {
                        peakSales = dailySummary[date].Total_Sales;
                        peakDay = date;
                    }
                });
                
                const execPeakDayElement = document.getElementById('execPeakDay');
                if (execPeakDayElement) execPeakDayElement.textContent = peakDay;
                
                const execPeakSalesElement = document.getElementById('execPeakSales');
                if (execPeakSalesElement) execPeakSalesElement.textContent = peakSales.toFixed(2);
                
                // Find top branch
                let topBranch = '';
                let topBranchSales = 0;
                
                Object.keys(branchSummary).forEach(branch => {
                    if (branchSummary[branch].Total_Sales > topBranchSales) {
                        topBranchSales = branchSummary[branch].Total_Sales;
                        topBranch = branch;
                    }
                });
                
                const execTopBranchElement = document.getElementById('execTopBranch');
                if (execTopBranchElement) execTopBranchElement.textContent = topBranch;
                
                const execTopBranchSalesElement = document.getElementById('execTopBranchSales');
                if (execTopBranchSalesElement) execTopBranchSalesElement.textContent = topBranchSales.toFixed(2);
                
                // Update report findings
                const reportTopBranchElement = document.getElementById('reportTopBranch');
                if (reportTopBranchElement) reportTopBranchElement.textContent = topBranch;
                
                let highValueBranch = '';
                let highValue = 0;
                
                Object.keys(branchSummary).forEach(branch => {
                    if (branchSummary[branch].Avg_Transaction_Value > highValue) {
                        highValue = branchSummary[branch].Avg_Transaction_Value;
                        highValueBranch = branch;
                    }
                });
                
                const reportHighValueBranchElement = document.getElementById('reportHighValueBranch');
                if (reportHighValueBranchElement) reportHighValueBranchElement.textContent = highValueBranch;
                
                const sortedBranches = Object.keys(branchSummary).sort((a, b) => 
                    branchSummary[a].Total_Sales - branchSummary[b].Total_Sales
                );
                
                const reportLowBranchesElement = document.getElementById('reportLowBranches');
                if (reportLowBranchesElement) reportLowBranchesElement.textContent = 
                    sortedBranches.slice(0, 2).join(', ');
                
                // Update daily trends
                const reportPeakDayElement = document.getElementById('reportPeakDay');
                if (reportPeakDayElement) reportPeakDayElement.textContent = peakDay;
                
                const reportPeakDayOfWeekElement = document.getElementById('reportPeakDayOfWeek');
                if (reportPeakDayOfWeekElement) reportPeakDayOfWeekElement.textContent = dailySummary[peakDay].Day_of_Week;
                
                const reportPeakDaySalesElement = document.getElementById('reportPeakDaySales');
                if (reportPeakDaySalesElement) reportPeakDaySalesElement.textContent = peakSales.toFixed(2);
                
                let lowDay = '';
                let lowSales = Number.MAX_VALUE;
                
                Object.keys(dailySummary).forEach(date => {
                    if (dailySummary[date].Total_Sales < lowSales) {
                        lowSales = dailySummary[date].Total_Sales;
                        lowDay = date;
                    }
                });
                
                const reportLowDayElement = document.getElementById('reportLowDay');
                if (reportLowDayElement) reportLowDayElement.textContent = lowDay;
                
                const reportLowDayOfWeekElement = document.getElementById('reportLowDayOfWeek');
                if (reportLowDayOfWeekElement) reportLowDayOfWeekElement.textContent = dailySummary[lowDay].Day_of_Week;
                
                const reportLowDaySalesElement = document.getElementById('reportLowDaySales');
                if (reportLowDaySalesElement) reportLowDaySalesElement.textContent = lowSales.toFixed(2);
                
                // Calculate weekend vs weekday averages
                let weekendSales = 0;
                let weekendCount = 0;
                let weekdaySales = 0;
                let weekdayCount = 0;
                
                Object.keys(dailySummary).forEach(date => {
                    const dayOfWeek = dailySummary[date].Day_of_Week;
                    if (dayOfWeek === 'Friday' || dayOfWeek === 'Saturday') {
                        weekendSales += dailySummary[date].Total_Sales;
                        weekendCount++;
                    } else {
                        weekdaySales += dailySummary[date].Total_Sales;
                        weekdayCount++;
                    }
                });
                
                const weekendAvg = weekendCount > 0 ? weekendSales / weekendCount : 0;
                const weekdayAvg = weekdayCount > 0 ? weekdaySales / weekdayCount : 0;
                
                const reportWeekendAvgElement = document.getElementById('reportWeekendAvg');
                if (reportWeekendAvgElement) reportWeekendAvgElement.textContent = weekendAvg.toFixed(2);
                
                const reportWeekdayAvgElement = document.getElementById('reportWeekdayAvg');
                if (reportWeekdayAvgElement) reportWeekdayAvgElement.textContent = weekdayAvg.toFixed(2);
                
                // Update target plan
                const reportOverallTargetElement = document.getElementById('reportOverallTarget');
                if (reportOverallTargetElement) reportOverallTargetElement.textContent = overallTarget.toFixed(2);
                
                const reportCurrentTotalElement = document.getElementById('reportCurrentTotal');
                if (reportCurrentTotalElement) reportCurrentTotalElement.textContent = totalSales.toFixed(2);
                
                // Update report tables
                updateReportBranchTable(branchSummary);
                updateReportDailyTable(dailySummary);
                updateReportTargetTable(branchSummary, targetData);
                
                // Update report charts
                updateReportBranchChart(branchSummary);
                updateReportDailyChart(dailySummary);
                updateReportTargetChart(branchSummary, targetData);
            } catch (e) {
                console.error("Error updating management report:", e);
            }
        }

        // Update report branch table
        function updateReportBranchTable(branchSummary) {
            try {
                const tableBody = document.getElementById('reportBranchTableBody');
                if (!tableBody) return;
                
                tableBody.innerHTML = '';
                
                Object.keys(branchSummary).forEach(branch => {
                    const summary = branchSummary[branch];
                    
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = branch;
                    row.insertCell(1).textContent = summary.Total_Transactions.toLocaleString();
                    row.insertCell(2).textContent = summary.Total_Sales.toFixed(2);
                    row.insertCell(3).textContent = summary.Avg_Transaction_Value.toFixed(2);
                    row.insertCell(4).textContent = summary.Avg_Daily_Sales.toFixed(2);
                });
            } catch (e) {
                console.error("Error updating report branch table:", e);
            }
        }

        // Update report daily table
        function updateReportDailyTable(dailySummary) {
            try {
                const tableBody = document.getElementById('reportDailyTableBody');
                if (!tableBody) return;
                
                tableBody.innerHTML = '';
                
                Object.keys(dailySummary).sort().forEach(date => {
                    const summary = dailySummary[date];
                    
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = date;
                    row.insertCell(1).textContent = summary.Day_of_Week;
                    row.insertCell(2).textContent = summary.Total_Transactions.toLocaleString();
                    row.insertCell(3).textContent = summary.Total_Sales.toFixed(2);
                    row.insertCell(4).textContent = summary.Avg_Transaction_Value.toFixed(2);
                });
            } catch (e) {
                console.error("Error updating report daily table:", e);
            }
        }

        // Update report target table
        function updateReportTargetTable(branchSummary, targetData) {
            try {
                const tableBody = document.getElementById('reportTargetTableBody');
                if (!tableBody) return;
                
                tableBody.innerHTML = '';
                
                Object.keys(branchSummary).forEach(branch => {
                    const summary = branchSummary[branch];
                    const target = targetData[branch];
                    
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = branch;
                    row.insertCell(1).textContent = summary.Total_Sales.toFixed(2);
                    row.insertCell(2).textContent = `${(target.Growth_Rate * 100).toFixed(2)}%`;
                    row.insertCell(3).textContent = target.Performance_Score.toFixed(2);
                    row.insertCell(4).textContent = target.Target_Sales.toFixed(2);
                    row.insertCell(5).textContent = target.Target_Increase.toFixed(2);
                });
            } catch (e) {
                console.error("Error updating report target table:", e);
            }
        }

        // Update report branch chart
        function updateReportBranchChart(branchSummary) {
            try {
                const branches = Object.keys(branchSummary);
                const sales = branches.map(branch => branchSummary[branch].Total_Sales);
                
                const ctx = document.getElementById('reportBranchChart');
                if (!ctx) return;
                
                const chartCtx = ctx.getContext('2d');
                if (!chartCtx) return;
                
                // Destroy existing chart if it exists
                if (window.reportBranchChartInstance) {
                    window.reportBranchChartInstance.destroy();
                }
                
                window.reportBranchChartInstance = new Chart(chartCtx, {
                    type: 'bar',
                    data: {
                        labels: branches,
                        datasets: [{
                            label: 'Total Sales (AED)',
                            data: sales,
                            backgroundColor: [
                                'rgba(220, 53, 69, 0.7)',
                                'rgba(255, 193, 7, 0.7)',
                                'rgba(32, 201, 151, 0.7)',
                                'rgba(13, 202, 240, 0.7)',
                                'rgba(111, 66, 193, 0.7)',
                                'rgba(253, 126, 20, 0.7)',
                                'rgba(40, 167, 69, 0.7)'
                            ],
                            borderColor: [
                                'rgba(220, 53, 69, 1)',
                                'rgba(255, 193, 7, 1)',
                                'rgba(32, 201, 151, 1)',
                                'rgba(13, 202, 240, 1)',
                                'rgba(111, 66, 193, 1)',
                                'rgba(253, 126, 20, 1)',
                                'rgba(40, 167, 69, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Branch'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Total Sales by Branch'
                            },
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Error updating report branch chart:", e);
            }
        }

        // Update report daily chart
        function updateReportDailyChart(dailySummary) {
            try {
                const dates = Object.keys(dailySummary).sort();
                const sales = dates.map(date => dailySummary[date].Total_Sales);
                const transactions = dates.map(date => dailySummary[date].Total_Transactions);
                
                const ctx = document.getElementById('reportDailyChart');
                if (!ctx) return;
                
                const chartCtx = ctx.getContext('2d');
                if (!chartCtx) return;
                
                // Destroy existing chart if it exists
                if (window.reportDailyChartInstance) {
                    window.reportDailyChartInstance.destroy();
                }
                
                window.reportDailyChartInstance = new Chart(chartCtx, {
                    type: 'line',
                    data: {
                        labels: dates,
                        datasets: [
                            {
                                label: 'Sales (AED)',
                                data: sales,
                                borderColor: 'rgba(220, 53, 69, 1)',
                                backgroundColor: 'rgba(220, 53, 69, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4,
                                yAxisID: 'y'
                            },
                            {
                                label: 'Transactions',
                                data: transactions,
                                borderColor: 'rgba(32, 201, 151, 1)',
                                backgroundColor: 'rgba(32, 201, 151, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4,
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                position: 'left',
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            },
                            y1: {
                                beginAtZero: true,
                                position: 'right',
                                title: {
                                    display: true,
                                    text: 'Transactions'
                                },
                                grid: {
                                    drawOnChartArea: false
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Date'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Daily Delivery Performance Trends'
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Error updating report daily chart:", e);
            }
        }

        // Update report target chart
        function updateReportTargetChart(branchSummary, targetData) {
            try {
                const branches = Object.keys(branchSummary);
                const currentSales = branches.map(branch => branchSummary[branch].Total_Sales);
                const targetSales = branches.map(branch => targetData[branch].Target_Sales);
                
                const ctx = document.getElementById('reportTargetChart');
                if (!ctx) return;
                
                const chartCtx = ctx.getContext('2d');
                if (!chartCtx) return;
                
                // Destroy existing chart if it exists
                if (window.reportTargetChartInstance) {
                    window.reportTargetChartInstance.destroy();
                }
                
                window.reportTargetChartInstance = new Chart(chartCtx, {
                    type: 'bar',
                    data: {
                        labels: branches,
                        datasets: [
                            {
                                label: 'Current Sales (AED)',
                                data: currentSales,
                                backgroundColor: 'rgba(111, 66, 193, 0.7)',
                                borderColor: 'rgba(111, 66, 193, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Target Sales (AED)',
                                data: targetSales,
                                backgroundColor: 'rgba(220, 53, 69, 0.7)',
                                borderColor: 'rgba(220, 53, 69, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Branch'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Branch Sales Targets'
                            }
                        }
                    }
                });
            } catch (e) {
                console.error("Error updating report target chart:", e);
            }
        }

        // Download report as text file
        function downloadReport() {
            try {
                const { branchSummary, dailySummary } = processSalesData();
                const { targetData, overallTarget } = calculateTargetPlan(branchSummary);
                
                // Calculate total metrics
                let totalSales = 0;
                let totalTransactions = 0;
                
                Object.keys(branchSummary).forEach(branch => {
                    totalSales += branchSummary[branch].Total_Sales;
                    totalTransactions += branchSummary[branch].Total_Transactions;
                });
                
                const avgTransaction = totalSales / totalTransactions;
                
                // Find peak day
                let peakDay = '';
                let peakSales = 0;
                
                Object.keys(dailySummary).forEach(date => {
                    if (dailySummary[date].Total_Sales > peakSales) {
                        peakSales = dailySummary[date].Total_Sales;
                        peakDay = date;
                    }
                });
                
                // Find top branch
                let topBranch = '';
                let topBranchSales = 0;
                
                Object.keys(branchSummary).forEach(branch => {
                    if (branchSummary[branch].Total_Sales > topBranchSales) {
                        topBranchSales = branchSummary[branch].Total_Sales;
                        topBranch = branch;
                    }
                });
                
                // Create report text
                const reportText = `CRISPY CHICKEN DELIVERY PERFORMANCE REPORT
========================================
Report Date: ${new Date().toLocaleDateString()}
Data Period: ${Object.keys(dailySummary).map(date => new Date(date)).reduce((min, date) => date < min ? date : min).toLocaleDateString()} to ${Object.keys(dailySummary).map(date => new Date(date)).reduce((max, date) => date > max ? date : max).toLocaleDateString()}

EXECUTIVE SUMMARY
-----------------
Total Current Sales: AED ${totalSales.toFixed(2)}
Overall Target: AED ${overallTarget.toFixed(2)} (10% increase)
Total Transactions: ${totalTransactions.toLocaleString()}
Average Transaction Value: AED ${avgTransaction.toFixed(2)}

BRANCH PERFORMANCE
------------------
 ${Object.keys(branchSummary).map(branch => 
    `${branch}: ${branchSummary[branch].Total_Transactions.toLocaleString()} transactions, AED ${branchSummary[branch].Total_Sales.toFixed(2)} sales, AED ${branchSummary[branch].Avg_Transaction_Value.toFixed(2)} avg transaction`
).join('\n')}

DAILY TRENDS
------------
 ${Object.keys(dailySummary).sort().map(date => 
    `${date} (${dailySummary[date].Day_of_Week}): ${dailySummary[date].Total_Transactions.toLocaleString()} transactions, AED ${dailySummary[date].Total_Sales.toFixed(2)} sales, AED ${dailySummary[date].Avg_Transaction_Value.toFixed(2)} avg transaction`
).join('\n')}

TARGET PLAN
-----------
 ${Object.keys(branchSummary).map(branch => 
    `${branch}: Current AED ${branchSummary[branch].Total_Sales.toFixed(2)}, Target AED ${targetData[branch].Target_Sales.toFixed(2)}, Increase AED ${targetData[branch].Target_Increase.toFixed(2)}`
).join('\n')}

MANAGEMENT RECOMMENDATIONS
--------------------------
1. Operational Improvements:
   - Implement demand forecasting for peak days (especially weekends)
   - Optimize staff scheduling based on historical delivery patterns
   - Standardize order processing across all branches

2. Performance Monitoring:
   - Track daily performance against targets with weekly reviews
   - Implement real-time dashboard for delivery metrics
   - Conduct monthly performance reviews with branch managers

3. Growth Initiatives:
   - Launch loyalty program for repeat delivery customers
   - Introduce time-based promotions during low-traffic periods
   - Explore partnerships with food delivery platforms for wider reach

4. Resource Allocation:
   - Allocate additional delivery staff to high-performing branches during peak hours
   - Invest in training programs for underperforming branches
   - Consider menu adjustments based on local preferences at low-performing branches

5. Performance Incentives:
   - Implement bonus structure for branches exceeding targets
   - Recognize top-performing branches in company communications
   - Create healthy competition between branches with monthly performance awards

---
Report generated on: ${new Date().toLocaleDateString()}`;
                
                // Create download link
                const blob = new Blob([reportText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Crispy_Chicken_Report_${new Date().toISOString().split('T')[0]}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('Report downloaded successfully!', 'success');
            } catch (e) {
                console.error("Error downloading report:", e);
                showNotification('Error downloading report!', 'error');
            }
        }

        // Export data to CSV
        function exportDataToCSV() {
            try {
                let csv = 'Date,Branch,Channel,Transactions,Sales\n';
                
                salesData.forEach(entry => {
                    csv += `${entry.Date},${entry.Branch},${entry.Channel},${entry.Transactions},${entry.Sales}\n`;
                });
                
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Crispy_Chicken_Sales_Data_${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('Data exported successfully!', 'success');
            } catch (e) {
                console.error("Error exporting data to CSV:", e);
                showNotification('Error exporting data!', 'error');
            }
        }

        // Save data to file
        function saveDataToFile() {
            try {
                const dataStr = JSON.stringify(salesData);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `Crispy_Chicken_Sales_Data_${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                showNotification('Data saved to file successfully!', 'success');
            } catch (e) {
                console.error("Error saving data to file:", e);
                showNotification('Error saving data to file!', 'error');
            }
        }

        // Load data from file
        function loadDataFromFile() {
            try {
                document.getElementById('fileInput').click();
            } catch (e) {
                console.error("Error loading data from file:", e);
                showNotification('Error loading data!', 'error');
            }
        }

        // Handle file input change
        function handleFileSelect(event) {
            try {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        if (file.name.endsWith('.json')) {
                            salesData = JSON.parse(e.target.result);
                        } else if (file.name.endsWith('.csv')) {
                            // Simple CSV parsing (in a real app, use a proper CSV parser)
                            const lines = e.target.result.split('\n');
                            const headers = lines[0].split(',');
                            
                            salesData = [];
                            for (let i = 1; i < lines.length; i++) {
                                if (lines[i].trim() === '') continue;
                                
                                const values = lines[i].split(',');
                                salesData.push({
                                    Date: values[0],
                                    Branch: values[1],
                                    Channel: values[2],
                                    Transactions: parseInt(values[3]),
                                    Sales: parseFloat(values[4])
                                });
                            }
                        }
                        
                        updateCurrentDataTable();
                        updateDashboard();
                        saveDataToStorage();
                        showNotification('Data loaded successfully!', 'success');
                    } catch (error) {
                        console.error("Error parsing file:", error);
                        showNotification('Error loading data. Please check the file format.', 'error');
                    }
                };
                
                reader.readAsText(file);
                
                // Reset file input
                event.target.value = '';
            } catch (e) {
                console.error("Error handling file select:", e);
                showNotification('Error handling file selection!', 'error');
            }
        }

        // Reset data
        function resetData() {
            try {
                showConfirmationDialog(
                    'Confirm Reset All Data',
                    'Are you sure you want to reset all data? This action cannot be undone.',
                    '',
                    () => {
                        salesData = [];
                        updateCurrentDataTable();
                        updateDashboard();
                        updateDataStatus(false);
                        showNotification('Data reset successfully!', 'success');
                    }
                );
            } catch (e) {
                console.error("Error resetting data:", e);
                showNotification('Error resetting data!', 'error');
            }
        }

        // Show page
        function showPage(pageName) {
            try {
                // Hide all pages
                document.querySelectorAll('.page').forEach(page => {
                    page.style.display = 'none';
                });
                
                // Show selected page
                const targetPage = document.getElementById(`${pageName}Page`);
                if (targetPage) {
                    targetPage.style.display = 'block';
                }
                
                // Update active nav link in sidebar
                document.querySelectorAll('.sidebar .nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                const activeSidebarLink = document.getElementById(`sidebar${pageName.charAt(0).toUpperCase() + pageName.slice(1).replace('-', '')}Link`);
                if (activeSidebarLink) {
                    activeSidebarLink.classList.add('active');
                }
                
                // Update active nav link in top navbar
                document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                const activeTopLink = document.getElementById(`${pageName.replace('-', '')}Link`);
                if (activeTopLink) {
                    activeTopLink.classList.add('active');
                }
                
                // If report page, update management report
                if (pageName === 'report') {
                    updateManagementReport();
                }
            } catch (e) {
                console.error("Error showing page:", e);
            }
        }

        // Update dashboard
        function updateDashboard() {
            try {
                updateDashboardMetrics();
                updateBranchChart();
                updateDailyChart();
                updateTargetChart();
                updateBranchTable();
                updateDailyTable();
                updateTargetTable();
            } catch (e) {
                console.error("Error updating dashboard:", e);
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log("DOM fully loaded and parsed");
                
                // Load data from localStorage
                loadDataFromStorage();
                
                // Set today's date as default in the form
                const today = new Date().toISOString().split('T')[0];
                const entryDateElement = document.getElementById('entryDate');
                if (entryDateElement) {
                    entryDateElement.value = today;
                }
                
                // Update UI
                updateCurrentDataTable();
                updateDashboard();
                
                // Setup navigation event listeners
                // Sidebar navigation links
                const sidebarDashboardLink = document.getElementById('sidebarDashboardLink');
                const sidebarDataManagementLink = document.getElementById('sidebarDataManagementLink');
                const sidebarReportLink = document.getElementById('sidebarReportLink');
                
                if (sidebarDashboardLink) {
                    sidebarDashboardLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        showPage('dashboard');
                    });
                }
                
                if (sidebarDataManagementLink) {
                    sidebarDataManagementLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        showPage('data-management');
                    });
                }
                
                if (sidebarReportLink) {
                    sidebarReportLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        showPage('report');
                    });
                }
                
                // Top navigation links
                const dashboardLink = document.getElementById('dashboardLink');
                const dataManagementLink = document.getElementById('dataManagementLink');
                const reportLink = document.getElementById('reportLink');
                
                if (dashboardLink) {
                    dashboardLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        showPage('dashboard');
                    });
                }
                
                if (dataManagementLink) {
                    dataManagementLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        showPage('data-management');
                    });
                }
                
                if (reportLink) {
                    reportLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        showPage('report');
                    });
                }
                
                // Save Data buttons
                const saveDataBtn = document.getElementById('saveDataBtn');
                const saveDataBtn2 = document.getElementById('saveDataBtn2');
                
                if (saveDataBtn) {
                    saveDataBtn.addEventListener('click', saveDataToStorage);
                }
                if (saveDataBtn2) {
                    saveDataBtn2.addEventListener('click', saveDataToStorage);
                }
                
                // Load Data buttons
                const loadDataBtn = document.getElementById('loadDataBtn');
                const loadDataBtn2 = document.getElementById('loadDataBtn2');
                
                if (loadDataBtn) {
                    loadDataBtn.addEventListener('click', loadDataFromFile);
                }
                if (loadDataBtn2) {
                    loadDataBtn2.addEventListener('click', loadDataFromFile);
                }
                
                // Export Data buttons
                const exportDataBtn = document.getElementById('exportDataBtn');
                const exportDataBtn2 = document.getElementById('exportDataBtn2');
                
                if (exportDataBtn) {
                    exportDataBtn.addEventListener('click', exportDataToCSV);
                }
                if (exportDataBtn2) {
                    exportDataBtn2.addEventListener('click', exportDataToCSV);
                }
                
                // Reset Data button
                const resetDataBtn = document.getElementById('resetDataBtn');
                const resetDataBtn2 = document.getElementById('resetDataBtn2');
                
                if (resetDataBtn) {
                    resetDataBtn.addEventListener('click', resetData);
                }
                if (resetDataBtn2) {
                    resetDataBtn2.addEventListener('click', resetData);
                }
                
                // File input
                const fileInput = document.getElementById('fileInput');
                if (fileInput) {
                    fileInput.addEventListener('change', handleFileSelect);
                }
                
                // Dashboard refresh
                const refreshDashboardBtn = document.getElementById('refreshDashboardBtn');
                if (refreshDashboardBtn) {
                    refreshDashboardBtn.addEventListener('click', function() {
                        updateDashboard();
                        showNotification('Dashboard refreshed!', 'info');
                    });
                }
                
                // Report generation
                const generateReportBtn = document.getElementById('generateReportBtn');
                if (generateReportBtn) {
                    generateReportBtn.addEventListener('click', function() {
                        updateManagementReport();
                        showNotification('Report generated successfully!', 'success');
                    });
                }
                
                // Report download
                const downloadReportBtn = document.getElementById('downloadReportBtn');
                if (downloadReportBtn) {
                    downloadReportBtn.addEventListener('click', downloadReport);
                }
                
                // Data entry form
                const dataEntryForm = document.getElementById('dataEntryForm');
                if (dataEntryForm) {
                    dataEntryForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        
                        const editIndex = document.getElementById('editIndex').value;
                        
                        const newEntry = {
                            Date: document.getElementById('entryDate').value,
                            Branch: document.getElementById('entryBranch').value,
                            Channel: document.getElementById('entryChannel').value,
                            Transactions: parseInt(document.getElementById('entryTransactions').value),
                            Sales: parseFloat(document.getElementById('entrySales').value)
                        };
                        
                        if (editIndex === '-1') {
                            // Add new entry
                            salesData.push(newEntry);
                            showNotification('Data added successfully!', 'success');
                        } else {
                            // Update existing entry
                            salesData[editIndex] = newEntry;
                            showNotification('Data updated successfully!', 'success');
                            
                            // Reset form for new entries
                            document.getElementById('editIndex').value = '-1';
                            document.getElementById('formTitle').textContent = 'Add New Sales Data';
                            document.getElementById('submitButtonText').textContent = 'Add Entry';
                        }
                        
                        updateCurrentDataTable();
                        updateDashboard();
                        updateDataStatus(false);
                        
                        // Reset form
                        this.reset();
                        const today = new Date().toISOString().split('T')[0];
                        const entryDateElement = document.getElementById('entryDate');
                        if (entryDateElement) {
                            entryDateElement.value = today;
                        }
                    });
                }
                
                // Add New Entry button
                const addNewEntryBtn = document.getElementById('addNewEntryBtn');
                if (addNewEntryBtn) {
                    addNewEntryBtn.addEventListener('click', function() {
                        // Reset form
                        document.getElementById('dataEntryForm').reset();
                        document.getElementById('editIndex').value = '-1';
                        document.getElementById('formTitle').textContent = 'Add New Sales Data';
                        document.getElementById('submitButtonText').textContent = 'Add Entry';
                        
                        // Set today's date
                        const today = new Date().toISOString().split('T')[0];
                        document.getElementById('entryDate').value = today;
                        
                        // Scroll to form
                        document.getElementById('dataEntryForm').scrollIntoView({ behavior: 'smooth' });
                    });
                }
                
                // Clear all data button
                clearAllData();
                
                // Confirmation dialog cancel button
                const cancelConfirmation = document.getElementById('cancelConfirmation');
                if (cancelConfirmation) {
                    cancelConfirmation.addEventListener('click', hideConfirmationDialog);
                }
                
                // Mobile sidebar toggle
                const sidebarToggle = document.createElement('button');
                sidebarToggle.className = 'navbar-toggler d-md-none';
                sidebarToggle.setAttribute('type', 'button');
                sidebarToggle.setAttribute('data-bs-toggle', 'collapse');
                sidebarToggle.setAttribute('data-bs-target', '#sidebar');
                sidebarToggle.innerHTML = '<span class="navbar-toggler-icon"></span>';
                
                const navbarNav = document.querySelector('.navbar-nav');
                if (navbarNav) {
                    navbarNav.appendChild(sidebarToggle);
                }
                
                console.log("All event listeners set up successfully");
            } catch (e) {
                console.error("Error initializing app:", e);
            }
        });
    </script>
</body>
</html>
